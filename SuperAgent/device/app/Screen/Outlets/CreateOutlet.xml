<?xml version="1.0" encoding="utf-8" ?>
<c:Screen xmlns:c="BitMobile.Controls" xmlns:s="BitMobile.ValueStack" StyleSheet="CreateOutlet.css">

	<s:Push Id="outlet" Value="$CreateOutlet($param2)"></s:Push>
	<s:Push Id="territory" Value="$GetTerritory()"></s:Push>
	<s:Push Id="sideStyle" Value="$SetSideStyles($outlet)"></s:Push>

	<c:DockLayout>

		<c:DockLayout CssClass="top_navigator">
			<c:HorizontalLayout>
				<c:TextView Text="#newClient#" />
			</c:HorizontalLayout>
		</c:DockLayout>

		<c:HorizontalLine />

		<c:HorizontalLayout Id="btnCancel" CssClass="bottom_btn">
			<c:VerticalLayout OnEvent="Back" OnClickAction="$DoRollback()">
				<c:TextView CssClass="left_tv" Text="#cancel#" />
			</c:VerticalLayout>

			<s:If Test="$NoRequired()">
				<c:VerticalLayout Id="btnSave" OnClickAction="$SaveNewOutlet($outlet)">
					<c:TextView CssClass="right_tv" Text="#save#" />
				</c:VerticalLayout>
			</s:If>
			<s:Else>
				<c:DockLayout Id="btnSave">
					<c:VerticalLayout CssClass="gr_right_tv_mrg"></c:VerticalLayout>
					<c:TextView Text="{@requiredLeft})" CssClass="gr_right_tv"/>
					<c:Image CssClass="gr_right_tv_img"/>
					<c:TextView Text="#forward# (" CssClass="gr_right_tv"/>
				</c:DockLayout>
			</s:Else>
		</c:HorizontalLayout>
		<c:HorizontalLine CssClass="b_line" />

		<c:ScrollView Id="grScrollView">

			<s:If Test="$NoRequired()">
				<c:HorizontalLayout CssClass="margin_top"></c:HorizontalLayout>
			</s:If>
			<s:Else>
				<c:HorizontalLayout CssClass="required_grid">
					<c:TextView Text="#requiredFieldsLeft# "></c:TextView>
					<c:Image />
					<c:TextView Id="obligateredInfo" Text="{@requiredLeft}"></c:TextView>
				</c:HorizontalLayout>
			</s:Else>
			<c:HorizontalLine />

			<c:HorizontalLayout CssClass="grid" OnClickAction="$FocusOnEditText(FullOutletName, 1)">
				<c:HorizontalLayout CssClass="$sideStyle.outletNameFull"></c:HorizontalLayout>
				<c:VerticalLayout>
					<c:TextView Text="#descriptionFULL#" CssClass="description_row"></c:TextView>
					<c:MemoEdit Id="FullOutletName" Value="$outlet.LegalName" Placeholder="—" CssClass="main_row" OnLostFocus="$DoRefresh($outlet)"/>
				</c:VerticalLayout>
			</c:HorizontalLayout>
			<c:HorizontalLine />

			<c:HorizontalLayout CssClass="grid" OnClickAction="$FocusOnEditText(outletName, 1)">
				<c:HorizontalLayout CssClass="$sideStyle.outletName"></c:HorizontalLayout>
				<c:VerticalLayout>
					<c:TextView Text="#outlet_description#" CssClass="description_row"></c:TextView>
					<c:MemoEdit Id="outletName" Value="$outlet.Description" Placeholder="—" CssClass="main_row" OnLostFocus="$DoRefresh($outlet)"/>
				</c:VerticalLayout>
			</c:HorizontalLayout>
			<c:HorizontalLine />

			<c:HorizontalLayout CssClass="grid" >
				<c:HorizontalLayout CssClass="$sideStyle.Segment"></c:HorizontalLayout>
				<c:VerticalLayout OnClickAction="$ChoseFromCatalog(Segment)">
					<c:TextView Text="#Segment#" CssClass="description_row"></c:TextView>
					<s:If Test="$IsEmptyValue($outlet.Segment)">
						<c:TextView Id="Segment" Text="—" CssClass="main_row"/>
					</s:If>
					<s:Else>
						<c:TextView Id="Segment" Text="$outlet.Segment.Description" CssClass="main_row"/>
					</s:Else>
				</c:VerticalLayout>
			</c:HorizontalLayout>
			<c:HorizontalLine />

			<c:HorizontalLayout CssClass="grid" >
				<c:HorizontalLayout CssClass="$sideStyle.TypeOrg"></c:HorizontalLayout>
				<c:VerticalLayout OnClickAction="$ChoseFromCatalog(TypeOrg)">
					<c:TextView Text="#TypeOrg#" CssClass="description_row"></c:TextView>
					<s:If Test="$IsEmptyValue($outlet.OrgType)">
						<c:TextView Id="TypeOrg" Text="—" CssClass="main_row"/>
					</s:If>
					<s:Else>
						<c:TextView Id="TypeOrg" Text="$outlet.OrgType.Description" CssClass="main_row"/>
					</s:Else>
				</c:VerticalLayout>
			</c:HorizontalLayout>
			<c:HorizontalLine />

			<c:HorizontalLayout CssClass="grid" >
				<c:HorizontalLayout CssClass="empty_side_wh"></c:HorizontalLayout>
				<c:VerticalLayout OnClickAction="$ChoseFromCatalog(Profile)">
					<c:TextView Text="#Profile#" CssClass="description_row"></c:TextView>
					<s:If Test="$IsEmptyValue($outlet.Profile)">
						<c:TextView Id="Profile" Text="—" CssClass="main_row"/>
					</s:If>
					<s:Else>
						<c:TextView Id="Profile" Text="$outlet.Profile.Description" CssClass="main_row"/>
					</s:Else>
				</c:VerticalLayout>
			</c:HorizontalLayout>
			<c:HorizontalLine />


			<s:Push Id="hasDistr" Value="$hasDistr()"></s:Push>

			<c:HorizontalLayout CssClass="end_of_block" />
		</c:ScrollView>



	</c:DockLayout>

</c:Screen>
